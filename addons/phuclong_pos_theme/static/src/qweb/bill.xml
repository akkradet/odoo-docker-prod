<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="label">
        <t t-set="logo" t-value="widget.pos.config.logo"/>
        <t t-set="c" t-value="1"/>
        <t t-set="total" t-value="0"/>
        <t t-foreach="orderlines" t-as="line">
            <t t-if="!line.is_topping_line and line.product.fnb_type == 'drink'">
                <t t-set="total" t-value="total + line.quantity"/>
            </t>
        </t>
        <t t-foreach="orderlines" t-as="line">
            <t t-foreach="_.range(line.get_bill_quantity_str())" t-as="count">
                <div label="POS Label" class="pos-sale-ticket" style="font-family:sans-serif;padding: 0 5px; font-family: Roboto;color: black !important;" t-if="!line.is_topping_line and line.product.fnb_type == 'drink'">
                    <div style="width: 185px;height:113px;overflow: hidden;margin:auto;">
                        <div style="font-family:sans-serif;font-size: 12px;margin-bottom:0 !important;font-weight:bold;">
                            <span>
                                #<t t-esc="order.uid.split('-')[order.uid.split('-').length-1]"/> 
                            </span>
                            (<t t-if="order.note_label"><t t-esc="order.note_label"/>
                                </t> - 
                                <t t-esc="c"/>/<t t-esc="total"/>) 
                        </div>
                        <div style="font-family:sans-serif;font-size: 12px;line-height: 12px;font-weight:bold;"> <t t-esc="line.product.display_name"/></div>
                        <div style="font-family:sans-serif;width:100%; display:inline-flex;max-height: 80px;overflow: hidden;">
                            <div style="width:60%;">
                                <t t-if="line.note">
                                    <div style="font-size: 10px;margin-bottom:0 !important;line-height: 11px;">
                                        * <t t-esc="line.note"/>
                                    </div>
                                </t>
                                <t t-foreach="orderlines" t-as="l">
                                    <t t-set="is_show_qty" t-value="l.get_bill_quantity_str()/line.get_bill_quantity_str()"/>
                                    <div t-if="l.is_topping_line and line.fe_uid == l.related_line_id" style="font-size: 10px;margin-bottom:0 !important;line-height: 11px;">
                                        -
                                        <t t-if="is_show_qty &gt; 1">
                                            (<t t-esc="is_show_qty"/> x)
                                        </t>
                                        <t t-esc="l.product.display_name"/> 
                                    </div>
                                </t>
                                <t t-if="line.material_name">
                                    <t t-set="materials" t-value="line.material_name.split(', ')"/>
                                    <t t-foreach="materials" t-as="mat">
                                        <div style="font-size: 10px;margin-bottom:0 !important;line-height: 11px;">
                                            - <t t-esc="mat"/> 
                                        </div>
                                    </t>
                                </t>
                            </div>
                            <div style="width:40%;">
                                <img style="margin: 5px auto 0 auto;max-width:100%;" src="https://i.postimg.cc/Px5150N3/logo-pl.png"/>  
                                <div style="text-align: center;font-size: 7px;margin-bottom:0 !important;line-height: 9px;width: 100%;word-spacing: 10vw;">
                                    <p style="font-size:8px;line-height: 9px;margin:0;">
                                        <t t-esc="moment().format('L')"/>
                                    </p>
                                    <p style="font-size:8px;line-height: 9px;margin:0;">
                                        <t t-esc="moment().format('LT')"/>
                                    </p>
                                </div> 
                            </div>
                        </div>
                        <t t-set="c" t-value="c+1"/>
                    </div>
                </div>
            </t>
        </t>
    </t>
    <!-- POS ORDER-->
    <t t-extend='OrderReceipt'>
        <t t-jquery='.pos-sale-ticket' t-operation='replace'>
            <t t-set="is_dollar_pos" t-value="widget.pos.config.is_dollar_pos"/>
            <t t-set="logo" t-value="widget.pos.config.logo"/>
            <t t-set="c" t-value="1"/>
            <t t-set="total" t-value="0"/>
            <t t-foreach="orderlines" t-as="line">
                <t t-if="!line.is_topping_line and line.product.fnb_type == 'drink'">
                    <t t-set="total" t-value="total + line.quantity"/>
                </t>
            </t>
            <div label="POS Order" class="pos-sale-ticket" style="font-family: Roboto;">
                <t t-set="on_account_info_string" t-value="0"/>
                <t t-set="discount_all" t-value="0"/>
                <div class="pos-center-align" style="line-height:17px;font-family:sans-serif;margin-top:0px;display:inline-flex;margin-bottom: 8px;">
                    <div style="padding-right: 15px;padding-top: 20px;">
                        <img style="width: 68px;max-height: 68px;" src="https://i.postimg.cc/Px5150N3/logo-pl.png"/>   
                    </div>
                    <div style="font-size: 10px; text-align: left; padding-top: 5px; padding-right: 5px;">
                        <t t-raw='receipt.header_xml' />
                    </div>
                </div>
                
                <div class="pos-center-align" style="line-height:17px;font-family:sans-serif;font-weight:bold;text-align: center;">
                    <span id="receipt" style="font-weight:bold;font-size: 16px;">PHIẾU THANH TOÁN</span>
                    <div class="printed" style="display:none;">
                        <span style="text-align: center;font-weight:bold;font-size: 12px; text-transform: uppercase;">bill in lại, không có giá trị nhận nước</span>
                        <br/>
                        <span style="font-weight:bold;font-size: 12px;font-style: italic;">(Lần in: <span id="number_count">1</span>)</span>
                    </div>
                </div>
                <div style="font-size: 11px;line-height:17px;font-family:sans-serif;margin-bottom:8px;border-bottom: 2px dashed black; padding-bottom: 8pxpx;">
                    Thu ngân: <t t-esc="widget.pos.pos_session.cashier_id[1] or receipt.cashier"/><br/>
                    Thời gian: <t t-esc="moment().format('L LT')"/><br/>
                    Số HĐ: <t t-esc="order.name"/> | #PG: <t t-esc="order.note_label"/><br/>
                </div>
                <t t-set="orderline_group" t-value="order.get_orderlines_groupby_combo()"></t>
                <t t-foreach="orderline_group" t-as="line">
                    <t t-if="!line.combo_seq">
                        <t t-set="orderline" t-value="line.lines"></t>
                        <t t-if="!orderline.is_topping_line and orderline.product.default_code != 'reward_code'">
                            <table style="line-height:15px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;">
                                <tbody>
                                    <tr style="font-weight:bold;vertical-align: middle;">
                                        <td class="pos-left-align" style="font-size: 12px;width: 55%;">
                                            <t t-esc="orderline.product.display_name"/>
                                        </td>
                                        <td class="pos-left-align" colspan="3" style="font-size: 12px;width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;">
                                            <t t-esc="orderline.quantity"/>
                                        </td>
                                        <td class="pos-left-align" style="font-size: 12px;text-align: right;width: 25%;">
                                            <t t-if="is_dollar_pos">$</t>
                                            <!-- <t t-esc="widget.format_currency_no_symbol(orderline.get_display_price())"/> -->
                                            <t t-esc="widget.format_currency_no_symbol(orderline.quantity*orderline.get_unit_display_price())"/>
                                            <t t-set="discount_all" t-value="discount_all + (orderline.quantity*orderline.get_unit_display_price() - orderline.get_display_price())"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- <t t-if="orderline.note">
                                <p style="line-height:15px;font-weight:bold;font-size: 12px;width: 100%;">
                                    * Ghi chú: <t t-esc="orderline.note"/>
                                </p>
                            </t> -->
                            <t t-if="orderline.promotion_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">KM: <t t-esc="widget.pos.get_order().get_promo_header_by_id(orderline.promotion_id).name" /></span>
                            </t>
                            <t t-if="orderline.promotion_condition_id and !orderline.promotion_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">KM: <t t-esc="widget.pos.get_order().get_promo_header_by_id(orderline.promotion_condition_id).name" /></span>
                            </t>
                            <!-- <t t-if="orderline.promotion_all_order_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">KM: <t t-esc="widget.pos.get_order().get_promo_header_by_id(orderline.promotion_all_order_id).name" /></span>
                            </t> -->
                            <t t-if="orderline.loyalty_discount_percent">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">Giảm giá loyalty: <t t-esc="orderline.loyalty_discount_percent" />%</span>
                            </t>
                            
                            <t t-if="orderline.get_reward()">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;"><t t-esc="orderline.get_reward_name()" /></span>
                            </t>
                            
                            <t t-if="orderline.is_birthday_promotion">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">Quà tặng sinh nhật</span>
                            </t>
                        </t>
                        <t t-foreach="orderlines" t-as="l">
                            <table style="line-height:15px;font-family:sans-serif;font-size: 12px;width: 100%; border: 0; table-layout: fixed;" t-if="l.is_topping_line and orderline.fe_uid == l.related_line_id">
                                <tbody>
                                    <tr style="vertical-align: middle;">
                                        <td class="pos-left-align" style="width: 55%;padding-left: 8pt;font-size: 12px;">
                                            + <t t-esc="l.product.display_name"/>
                                        </td>
                                        <td class="pos-left-align" colspan="3" style="width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;font-size: 12px;">
                                            <t t-esc="l.quantity"/>
                                        </td>
                                        <td style="width: 25%;text-align: right;font-size: 12px;">
                                            <t t-if="is_dollar_pos">$</t>
                                            <!-- <t t-esc="widget.format_currency_no_symbol(l.get_display_price())"/> -->
                                            <t t-esc="widget.format_currency_no_symbol(l.quantity*l.get_unit_display_price())"/>
                                            <t t-set="discount_all" t-value="discount_all + (l.quantity*l.get_unit_display_price() - l.get_display_price())"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </t>
                    </t>
                    <t t-else="1">
                        <table style="line-height:15px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;">
                            <tbody>
                                <tr style="font-weight:bold;vertical-align: middle;">
                                    <td class="pos-left-align" style="font-size: 12px;width: 55%;">
                                        <t t-esc="line.combo.name"/>
                                    </td>
                                    <td class="pos-left-align" colspan="3" style="font-size: 12px;width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;">
                                        <t t-esc="widget.format_currency_no_symbol(line.total_combo_qty)"/>
                                    </td>
                                    <td class="pos-left-align" style="font-size: 12px;text-align: right;width: 25%;">
                                        <t t-if="is_dollar_pos">$</t>
                                        <t t-esc="widget.format_currency_no_symbol(line.total_combo_amount)"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <t t-foreach="line.lines" t-as="orderline">
                            <table style="line-height:15px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;" t-if="!orderline.is_topping_line and orderline.product.default_code != 'reward_code'">
                                <tbody>
                                    <tr style="font-weight:bold;vertical-align: middle;">
                                        <td class="pos-left-align" style="font-size: 12px;width: 55%;padding-left:15px;">
                                            <t t-esc="orderline.product.display_name"/>
                                        </td>
                                        <td class="pos-left-align" colspan="3" style="font-size: 12px;width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;">
                                            <t t-esc="orderline.quantity"/>
                                        </td>
                                        <td class="pos-left-align" style="text-align: right;width: 25%;vertical-align: text-top;">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- <t t-if="orderline.note">
                                <p style="line-height:15px;font-weight:bold;font-size: 12px;width: 100%;">
                                    * Ghi chú: <t t-esc="orderline.note"/>
                                </p>
                            </t> -->
                            <t t-foreach="orderlines" t-as="l">
                                <table style="line-height:15px;font-family:sans-serif;font-size: 12px;width: 100%; border: 0; table-layout: fixed;" t-if="l.is_topping_line and orderline.fe_uid == l.related_line_id">
                                    <tbody>
                                        <tr style="vertical-align: middle;">
                                            <td class="pos-left-align" style="width: 55%;padding-left: 8pt;font-size: 12px;">
                                                + <t t-esc="l.product.display_name"/>
                                            </td>
                                            <td class="pos-left-align" colspan="3" style="width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;font-size: 12px;">
                                                <t t-esc="l.quantity"/>
                                            </td>
                                            <td style="width: 25%;text-align: right;font-size: 12px;">
                                                <t t-if="is_dollar_pos">$</t>
                                                <!-- <t t-esc="widget.format_currency_no_symbol(l.get_display_price())"/> -->
                                                <t t-esc="widget.format_currency_no_symbol(l.quantity*l.get_unit_display_price())"/>
                                                <t t-set="discount_all" t-value="discount_all + (l.quantity*l.get_unit_display_price() - l.get_display_price())"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </t>
                        </t>
                    </t>
                </t>
                <div class="receipt-total-info" style="line-height:17px;font-family:sans-serif;padding-top: 5px;border-top: 2px dashed;margin-top: 8px;">
                    <t t-if="order.promotion_id">
                        <t t-foreach="widget.pos.promotion_header" t-as="pro_id">
                            <t t-if="pro_id.id == order.promotion_id">
                                <p style="font-size: 11px;margin: 0 0 5px 0;font-style: italic;">
                                    KM:<t t-esc="pro_id.name"/>
                                </p>
                            </t>
                        </t>
                        <td/>
                    </t>
                    <table class="receipt-total" style="font-size:13px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;">
                        <colgroup>
                            <col width="50%"/>
                            <col width="50%"/>
                        </colgroup>
                        <tbody>
                            <tr>
                                <td>Tổng tiền</td>
                                <td class="pos-right-align" style="text-align: right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(order.get_total_with_tax() + Math.abs(order.discount_amount) - order.total_surcharge + discount_all)"/>
                                </td>
                            </tr>
                            <t t-set="discount_amount" t-value="order.discount_amount - order.get_total_discount()"/>
                            <tr t-if="discount_amount != 0">
                                <td>Giảm giá</td>
                                <td class="pos-right-align" style="text-align: right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(discount_amount)"/>
                                </td>
                            </tr>
                            <tr t-if="order.total_surcharge &gt; 0">
                                <td>Phụ thu</td>
                                <td class="pos-right-align" style="text-align: right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(order.total_surcharge)"/>
                                </td>
                            </tr>
                            <tr class="emph" style="font-size: 16px;color:black;font-weight:bold;">
                                <td class="pos-left-align" style="width:200px;">Thành tiền</td>
                                <td class="pos-right-align" style="width:30%;text-align: right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(order.get_total_with_tax())"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="receipt-paymentlines" style="font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;font-size: 11px;">
                        <colgroup>
                            <col width="60%"/>
                            <col width="40%"/>
                        </colgroup>
                        <tbody>
                        	<t t-if="order.payment_name">
                        		<tr>
                                    <td style="width:60%;">
                                        <t t-esc="order.payment_name" />
                                    </td>
                                    <td class="pos-right-align" style="text-align:right;">
                                        <t t-esc="widget.format_currency_no_symbol(order.get_total_with_tax())"/>
                                    </td>
                                </tr>
                        	</t>
                        	<t t-else="1">
                        		<t t-if="!paymentlines.length">
	                        		<tr>
	                                    <td style="width:60%;">
	                                        CASH
	                                    </td>
	                                    <td class="pos-right-align" style="text-align:right;">
	                                        0
	                                    </td>
	                                </tr>
	                        	</t>
	                            <tr t-foreach="paymentlines" t-as="line">
	                                <t t-set="exchange_rate" t-value="line.exchange_rate or 1"/>
	                                <td>
	                                    <t t-if="line.voucher_code.length &gt; 0">
	                                    	<t t-if="line.payment_method.use_for != 'gift_code'">
	                                        	VC<t t-esc="line.voucher_max_value/1000"/> (<t t-esc="line.voucher_code"/>)
	                                        </t>
	                                        <t t-else="1">
	                                        	<t t-esc="line.payment_method.name"/> (<t t-esc="line.voucher_code"/>)
	                                        </t>
	                                    </t>
	                                    <t t-else="1">
	                                        <t t-if="line.payment_method.use_for == 'cash' and line.currency_name.length &gt; 0">
	                                            <t t-esc="line.payment_method.name"/>(<t t-esc="line.currency_name"/>)
	                                        </t>
	                                        <t t-else="1">
	                                            <t t-esc="line.name"/>
	                                        </t>
	                                    </t>
	                                </td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-if="line.payment_method.use_for == 'cash' and line.currency_name.length &gt; 0 and line.currency_origin_value &gt; 0">
	                                        <t t-esc="widget.format_currency_no_symbol(line.amount)"/>
	                                    </t>
	                                    <t t-else="1">
	                                        <t t-if="is_dollar_pos">$</t>
	                                        <t t-esc="widget.format_currency_no_symbol(line.get_amount_print_bill())"/>
	                                    </t>
	                                    
	                                </td>
	                                <t t-if="line.on_account_info">
	                                    <t t-set="on_account_info_string" t-value="line.on_account_info"/>
	                                </t>
	                            </tr>
	                            <tr t-if="order.get_change() != 0">
	                                <td>Tiền trả lại (
	                                    <t t-if="is_dollar_pos">USD</t>
	                                    <t t-else="1">VND</t>
	                                )</td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-if="is_dollar_pos">$</t>
	                                    <t t-esc="widget.format_currency_no_symbol(order.get_change())"/>
	                                </td>
	                            </tr>
	                            <tr t-if="order.coupon_code_list">
	                            	<t t-if="order.check_employee_coupon_using()">
	                            		<td>Coupon NV</td>
	                            		<td></td>
	                            	</t>
	                            	<t t-else="1">
	                            		<td>Coupon:</td>
	                            		<td class="pos-right-align" style="text-align: right;">
		                                    <t t-esc="order.coupon_code_list"/>
		                                </td>
	                            	</t>
	                            </tr>
                        	</t>
                        </tbody>
                    </table>
                    <table class="receipt-point" style="font-size: 11px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;padding-top: 15px;border-collapse: separate;border-top: 2px dashed;" t-if="order.get_client()">
                        <colgroup>
                            <col width="50%"/>
                            <col width="50%"/>
                        </colgroup>
                        <tbody>
                            <tr>
                                <td>Khách hàng:</td>
                                <td class="pos-right-align" style="text-transform: uppercase;text-align: right;">
                                    <t t-esc="order.get_client().name"/>
                                </td>
                            </tr>
                            <t t-if="!order.get_partner_cardcode_expired_date()">
	                            <tr>
	                                <td>Điểm:</td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-esc="widget.format_pr(order.get_won_points(),rounding)"/>/<t t-esc="widget.format_pr(order.get_new_points(),rounding)"/>
	                                </td>
	                            </tr>
	                            <tr>
	                                <td>Điểm tích lũy:</td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-esc="widget.format_pr(order.get_client().current_point_act + order.get_won_points(),rounding)"/>
	                                </td>
	                            </tr>
	                            <tr class="loyalty-level-name">
	                                <td>Hạng thẻ:</td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-esc="order.get_loyalty_level()"/>
	                                </td>
	                            </tr>
	                            <tr class="loyalty-level-name">
	                                <td>Ngày hết hạn:</td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-esc="order.get_partner_expired_date()"/>
	                                </td>
	                            </tr>
	                         </t>
	                         <t t-else="1">
	                         	<tr class="loyalty-level-name">
	                                <td>Ngày hết hạn:</td>
	                                <td class="pos-right-align" style="text-align: right;">
	                                    <t t-esc="order.get_partner_cardcode_expired_date()"/>
	                                </td>
	                            </tr>
	                         </t>
                        </tbody>
                    </table>
                    <table t-if="on_account_info_string != 0" class="receipt-point" style="font-family: sans-serif; width: 100%; border: 0; table-layout: fixed; padding: 10px 0; border-collapse: separate; border-top: 2px dashed; border-bottom: 2px dashed; margin-bottom: 10px;">
                        <colgroup>
                            <col width="100%"/>
                        </colgroup>
                        <tbody>
                            <tr>
                                <td style="font-size: 13px;">
                                    <t t-esc="on_account_info_string"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="pos-center-align" style="line-height:17px;font-family:sans-serif;font-weight:bold;font-size: 12px;margin-bottom: 5px;text-align: center;">
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 20px; border-bottom: 2px dashed; padding-bottom: 10px; white-space:pre-line" t-if="order.note">Ghi chú: <t t-esc="order.note"/></p>
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 20px; border-bottom: 2px dashed; padding-bottom: 10px; white-space:pre-line;font-weight:normal" 
                    	t-if="order.delivery_address">Địa chỉ giao hàng: <t t-esc="order.delivery_address"/></p>
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 10px; border-bottom: 2px dashed; padding-bottom: 10px;font-weight:normal;" 
                       t-if="order.mobile_receiver_info">
                       <t t-esc="order.mobile_receiver_info"/>
                    </p>
                    <div style="font-size:12px;margin-right:auto;margin-left:auto;text-align: center;" class="order-reward-barcode pos-center-align" t-if="order.done_reward_code">
                        <br/>
                        <small style="margin-bottom:0px;text-align:left;display: block;"><t t-esc="order.reward_description"></t></small>
                        <br/>
                        <t t-if="order.reward_link">
                        	<img t-attf-src="http://chart.apis.google.com/chart?chld=L|0&amp;cht=qr&amp;chs=95x94&amp;choe=UTF-8&amp;chl= #{order.reward_link}"/>
                        </t>
                        <t t-foreach="order.done_reward_code" t-as="reward_code_done">
                            <p style="font-size:13px;margin-bottom:0px;margin-top:0px;" t-esc="reward_code_done"></p>
                        </t>
                        <br/>
                    </div>
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 10px; border-bottom: 2px dashed; padding-bottom: 10px;font-weight:normal;" 
                       t-if="order.invoice_request">
                       <t t-esc="order.invoice_name"/>-<t t-esc="order.invoice_vat"/>-<t t-esc="order.invoice_address || ''"/>-<t t-esc="order.invoice_email"/>-<t t-esc="order.invoice_contact"/>
                    </p>
                    <t t-raw='receipt.footer_xml' />
                    <p id="lasted-print" style="display:none;font-size: 12px; text-align: right; margin-top: 10px;"><t t-esc="moment().format('L LT')"/></p>
                </div>
            </div>
            <t t-if="!order.has_printed_label_first">
                <t t-foreach="orderlines" t-as="line">
                    <t t-foreach="_.range(line.get_bill_quantity_str())" t-as="count">
                        <div style="display:none;">
                            <div label="POS Label" class="pos-sale-ticket" style="padding: 0; font-family: Roboto;color: black !important;line-height:13px;" t-if="!line.is_topping_line and line.product.fnb_type == 'drink'">
                                <div style="width: 185px;height:113px;overflow: hidden;margin:auto;">
                                    <div style="font-family:sans-serif;font-size: 12px;margin-bottom:0 !important;font-weight:bold;">
                                        <span>
                                            #<t t-esc="order.uid.split('-')[order.uid.split('-').length-1]"/> 
                                        </span>
                                        (<t t-if="order.note_label"><t t-esc="order.note_label"/>
                                            </t> - 
                                            <t t-esc="c"/>/<t t-esc="total"/>) 
                                    </div>
                                    <div style="font-family:sans-serif;font-size: 12px;line-height: 12px;font-weight:bold;"> <t t-esc="line.product.display_name"/></div>
                                    <div style="font-family:sans-serif;width:100%; display:inline-flex;max-height: 80px;overflow: hidden;">
                                        <div style="width:60%;">
                                            <t t-if="line.note">
                                                <div style="font-size: 10px;margin-bottom:0 !important;line-height: 11px;">
                                                    * <t t-esc="line.note"/>
                                                </div>
                                            </t>
                                            <t t-foreach="orderlines" t-as="l">
                                                <t t-set="is_show_qty" t-value="l.get_bill_quantity_str()/line.get_bill_quantity_str()"/>
                                                <div t-if="l.is_topping_line and line.fe_uid == l.related_line_id" style="font-size: 10px;margin-bottom:0 !important;line-height: 11px;">
                                                    -
                                                    <t t-if="is_show_qty &gt; 1">
                                                        (<t t-esc="is_show_qty"/> x)
                                                    </t>
                                                    <t t-esc="l.product.display_name"/> 
                                                </div>
                                            </t>
                                            <t t-if="line.material_name">
                                                <t t-set="materials" t-value="line.material_name.split(', ')"/>
                                                <t t-foreach="materials" t-as="mat">
                                                    <div style="font-size: 10px;margin-bottom:0 !important;line-height: 11px;">
                                                        - <t t-esc="mat"/> 
                                                    </div>
                                                </t>
                                            </t>
                                        </div>
                                        <div style="width:40%;">
                                            <img style="margin: 5px auto 0 auto;max-width:100%;" src="https://i.postimg.cc/Px5150N3/logo-pl.png"/>  
                                            <div style="text-align: center;font-size: 7px;margin-bottom:0 !important;line-height: 9px;width: 100%;word-spacing: 10vw;">
                                                <p style="font-size:8px;line-height: 9px;margin:0;">
                                                    <t t-esc="moment().format('L')"/>
                                                </p>
                                                <p style="font-size:8px;line-height: 9px;margin:0;">
                                                    <t t-esc="moment().format('LT')"/>
                                                </p>
                                            </div> 
                                        </div>
                                    </div>
                                    <t t-set="c" t-value="c+1"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
                <t t-set="is_kitchen_bill" t-value="0"/>
                <t t-foreach="orderlines" t-as="line">
                    <t t-if="(line.product.fnb_type == 'food' or line.product.fnb_type == 'packaged_product') and !line.is_topping_line">
                        <t t-set="is_kitchen_bill" t-value="1"/>
                    </t>
                </t>
                <div style="display:none;">
                	<!-- 
                	<div label="POS Kitchen" class="pos-sale-ticket " style="font-family: Roboto;" t-if="is_kitchen_bill == 1">
                	 -->
                    <div label="POS Order" name="kitchen-bill" class="pos-sale-ticket " style="font-family: Roboto;" t-if="is_kitchen_bill == 1">
                        <div class="pos-center-align" style="font-family:sans-serif;font-weight:bold;text-align:center;">
                            <span style="font-weight:bold;font-size: 16px;">PHIẾU SẢN PHẨM</span>
                        </div>
                        <div style="font-family:sans-serif;margin-bottom:15px;border-bottom: 2px dashed black; padding-bottom: 15px; font-size: 13px;">
                            Thu ngân: <t t-esc="widget.pos.pos_session.cashier_id[1] or receipt.cashier"/><br/>
                            Thời gian: <t t-esc="moment().format('L LT')"/><br/>
                        </div>
                        <table class="receipt-point" style="font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;border-collapse: separate; border-bottom: 2px dashed; padding-bottom: 15px; margin-bottom: 15px;">
                            <colgroup>
                                <col width="50%"/>
                                <col width="50%"/>
                            </colgroup>
                            <tbody>
                                <tr t-if="order.note_label">
                                    <td style="font-size: 13px;">#PG:</td>
                                    <td class="pos-right-align" style="text-transform: uppercase;text-align:right;font-size: 13px;">
                                        <t t-esc="order.note_label"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="font-size: 13px;">#Ord:</td>
                                    <td class="pos-right-align" style="text-transform: uppercase;text-align:right;font-size: 13px;">
                                        <t t-esc="order.uid.split('-')[order.uid.split('-').length-1]"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <t t-foreach="order.get_kitchen_product_line()" t-as="orderline">
                            <t t-if="orderline.product.fnb_type == 'food' or orderline.product.fnb_type == 'packaged_product'">
                                <table t-if="!orderline.is_topping_line" style="font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;">
                                    <colgroup>
                                        <col width="75%"/>
                                        <col width="25%"/>
                                    </colgroup>
                                    <tbody>
                                        <tr style="font-weight:bold;font-size: 13px;">
                                            <td class="pos-left-align">
                                                <t t-esc="orderline.product.display_name"/>
                                            </td>
                                            <td class="pos-left-align" style="text-align: right;font-size: 13px;">
                                                <t t-esc="orderline.quantity"/>
                                            </td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                                <t t-foreach="orderlines" t-as="l">
                                    <table style="font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;font-size: 12px;" t-if="l.is_topping_line and orderline.fe_uid == l.related_line_id">
                                        <tbody>
                                            <tr>
                                                <td class="pos-left-align" style="width: 55%;padding-left: 8pt;">
                                                    + <t t-esc="l.product.display_name"/>
                                                </td>
                                                <td style="width: 25%;text-align: right;">
                                                    <t t-esc="l.get_bill_quantity_str()"/>
                                                </td>
                                            </tr>
                                            
                                        </tbody>
                                    </table>
                                </t>
                                <t t-if="orderline.note">
                                    <p class="pos-left-align" style="font-family:sans-serif;text-align:left;font-size:11px;">
                                        * Ghi chú: <t t-esc="orderline.note"/>
                                    </p>
                                </t>
                            </t>
                        </t>
                    </div>
                </div>
            </t>
       </t>
    </t>
    <t t-extend='PosReturnTicket'>
        <t t-jquery='.pos-sale-ticket' t-operation='replace'>
            <t t-set="is_dollar_pos" t-value="widget.pos.config.is_dollar_pos"/>
            <t t-set="logo" t-value="widget.pos.config.logo"/>
            <t t-set="on_account_info_string" t-value="0"/>
            <t t-set="discount_all" t-value="0"/>
            <div label="POS Order" class="pos-sale-ticket" style="font-family: Roboto;width:auto;">
                <div class="pos-center-align" style="line-height:17px;font-family:sans-serif;margin-top:0px;display:inline-flex;margin-bottom: 8px;">
                    <div style="padding-right: 15px;padding-top: 10px;">
                        <img style="width: 68px;max-height: 68px;" src="https://i.postimg.cc/Px5150N3/logo-pl.png"/>   
                    </div>
                    <div style="font-size: 10px; text-align: left; padding-top: 5px; padding-right: 5px;">
                        <t t-raw='receipt.header_xml' />
                    </div>
                </div>
                
                <div class="pos-center-align" style="line-height:17px;font-family:sans-serif;font-weight:bold;text-align: center;">
                    <span class="printed" style="font-weight:bold;font-size: 12px; text-transform: uppercase;">Bill không có giá trị nhận nước</span>
                    <br/>
                    <span class="printed" style="font-weight:bold;font-size: 12px;font-style: italic;">(Lần in: <span id="number_count">1</span>)</span>
                    <br/>
                </div>
                <div style="line-height:17px;font-family:sans-serif;margin:8px 0;border-bottom: 2px dashed black; padding-bottom: 8px;font-size:11px">
                    Thu ngân: <t t-esc="receipt_return.cashier_name"/><br />
                    Thời gian: <t t-esc="receipt_return.date_order_fm"/> <br/>
                    Số HĐ: <t t-esc="order.pos_reference"/> | #PG: <t t-esc="order.note_label"/><br/>
                </div>
                <t t-set="orderline_group" t-value="widget.pos.get_order().get_orderlines_groupby_combo(true)"></t>
                <t t-foreach="orderline_group" t-as="line">
                    <t t-if="!line.combo_seq">
                        <t t-set="orderline" t-value="line.lines"></t>
                        <t t-set="product" t-value="widget.pos.db.product_by_id[orderline.product_id]"/>
                        <t t-if="!orderline.is_topping_line and product.default_code != 'reward_code'">
                        
                            <table style="line-height:15px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;">
                                <tbody>
                                    <tr style="font-weight:bold;vertical-align: middle;">
                                        <td class="pos-left-align" style="font-size: 12px;width: 55%;">
                                            <t t-esc="orderline.product_name"/>
                                        </td>
                                        <td class="pos-left-align" colspan="3" style="font-size: 12px;width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;">
                                            <t t-esc="orderline.qty"/>
                                        </td>
                                        <td class="pos-left-align" style="font-size: 12px;text-align: right;width: 25%;">
                                            <t t-if="is_dollar_pos">$</t>
                                            <!-- <t t-esc="widget.format_currency_no_symbol(orderline.price_subtotal_incl)"/> -->
                                            <t t-esc="widget.format_currency_no_symbol(orderline.qty*orderline.price_unit)"/>
                                            <t t-set="discount_all" t-value="discount_all + (orderline.qty*orderline.price_unit - orderline.price_subtotal_incl)"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <t t-if="orderline.promotion_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">KM: <t t-esc="widget.pos.get_order().get_promo_header_by_id(orderline.promotion_id).name" /></span>
                            </t>
                            <t t-if="orderline.promotion_condition_id and !orderline.promotion_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">KM: <t t-esc="widget.pos.get_order().get_promo_header_by_id(orderline.promotion_condition_id).name" /></span>
                            </t>
                            <!-- <t t-if="orderline.promotion_all_order_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">KM: <t t-esc="widget.pos.get_order().get_promo_header_by_id(orderline.promotion_all_order_id).name" /></span>
                            </t> -->
                            <t t-if="orderline.loyalty_discount_percent">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">Giảm giá loyalty: <t t-esc="orderline.loyalty_discount_percent" />%</span>
                            </t>
                            
                            <t t-if="orderline.reward_id">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;"><t t-esc="widget.pos.get_order().get_reward_name_by_id(orderline.reward_id)" /></span>
                            </t>
                            
                            <t t-if="orderline.is_birthday_promotion">
                                <span style="line-height:15px;font-style:italic;font-family:sans-serif;font-size: 12px;">Quà tặng sinh nhật</span>
                            </t>
                        </t>
                        <!-- <t t-if="orderline.note">
                            <p style="line-height:15px;font-weight:bold;font-size: 12px;width: 100%;">
                                * Ghi chú: <t t-esc="orderline.note"/>
                            </p>
                        </t> -->
                        <t t-foreach="orderlines" t-as="l">
                            <table style="line-height:15px;font-family:sans-serif;font-size: 12px;width: 100%; border: 0; table-layout: fixed;" t-if="l.is_topping_line and orderline.fe_uid == l.related_line_id">
                                <tbody>
                                    <tr style="vertical-align: middle;">
                                        <td class="pos-left-align" style="width: 55%;padding-left: 8pt;font-size: 12px;">
                                            + <t t-esc="l.product_name"/>
                                        </td>
                                        <td class="pos-left-align" colspan="3" style="width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;font-size: 12px;">
                                            <t t-esc="l.qty"/>
                                        </td>
                                        <td style="width: 25%;text-align: right;font-size: 12px;">
                                            <t t-if="is_dollar_pos">$</t>
                                            <!-- <t t-esc="widget.format_currency_no_symbol(l.price_subtotal_incl)"/> -->
                                            <t t-esc="widget.format_currency_no_symbol(l.qty*l.price_unit)"/>
                                            <t t-set="discount_all" t-value="discount_all + (l.qty*l.price_unit - l.price_subtotal_incl)"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </t>
                    </t>
                    <t t-else="1">
                        <table style="line-height:15px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;">
                            <tbody>
                                <tr style="font-weight:bold;vertical-align: middle;">
                                    <td class="pos-left-align" style="font-size: 12px;width: 55%;">
                                        <t t-esc="line.combo.name"/>
                                    </td>
                                    <td class="pos-left-align" colspan="3" style="font-size: 12px;width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;">
                                        <t t-esc="widget.format_currency_no_symbol(line.total_combo_qty)"/>
                                    </td>
                                    <td class="pos-left-align" style="font-size: 12px;text-align: right;width: 25%;">
                                        <t t-if="is_dollar_pos">$</t>
                                        <t t-esc="widget.format_currency_no_symbol(line.total_combo_amount)"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <t t-foreach="line.lines" t-as="orderline">
                            <t t-set="product" t-value="widget.pos.db.product_by_id[orderline.product_id]"/>
                            <table style="line-height:15px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;" t-if="!orderline.is_topping_line and product.default_code != 'reward_code'">
                                <tbody>
                                    <tr style="font-weight:bold;vertical-align: middle;">
                                        <td class="pos-left-align" style="font-size: 12px;width: 55%;padding-left:15px;">
                                            <t t-esc="orderline.product_name"/>
                                        </td>
                                        <td class="pos-left-align" colspan="3" style="font-size: 12px;width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;">
                                            <t t-esc="orderline.qty"/>
                                        </td>
                                        <td class="pos-left-align" style="text-align: right;width: 25%;vertical-align: text-top;">
                                        </td> 
                                    </tr>
                                </tbody>
                            </table>
                            <!-- <t t-if="orderline.note">
                                <p style="line-height:15px;font-weight:bold;font-size: 12px;width: 100%;">
                                    * Ghi chú: <t t-esc="orderline.note"/>
                                </p>
                            </t> -->
                            <t t-foreach="orderlines" t-as="l">
                                <table style="line-height:15px;font-family:sans-serif;font-size: 12px;width: 100%; border: 0; table-layout: fixed;" t-if="l.is_topping_line and orderline.fe_uid == l.related_line_id">
                                    <tbody>
                                        <tr style="vertical-align: middle;">
                                            <td class="pos-left-align" style="width: 55%;padding-left:25px;font-size: 12px;">
                                                + <t t-esc="l.product_name"/>
                                            </td>
                                           	<td class="pos-left-align" colspan="3" style="width: 10%;text-overflow: clip;overflow-wrap: normal;overflow: hidden;text-align: center;font-size: 12px;">
                                                <t t-esc="l.qty"/>
                                            </td>
                                            <td style="width: 25%;text-align: right;font-size: 12px;">
                                                <t t-if="is_dollar_pos">$</t>
                                                <!-- <t t-esc="widget.format_currency_no_symbol(l.price_subtotal_incl)"/> -->
                                                <t t-esc="widget.format_currency_no_symbol(l.qty*l.price_unit)"/>
                                                <t t-set="discount_all" t-value="discount_all + (l.quantity*l.price_unit - l.price_subtotal_incl)"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </t>
                        </t>
                    </t>
                </t>
                <div class="receipt-total-info" style="line-height:17px;font-family:sans-serif;padding-top: 5px;border-top: 2px dashed;margin-top: 8px;">
                    <t t-if="order.promotion_id">
                        <t t-foreach="widget.pos.promotion_header" t-as="pro_id">
                            <t t-if="pro_id.id == order.promotion_id">
                                <p style="font-size: 11px;margin: 0 0 5px 0;font-style: italic;">
                                    KM:<t t-esc="pro_id.name"/>
                                </p>
                            </t>
                        </t>
                        <td/>
                    </t>
                    <table class="receipt-total" style="width: 100%; border: 0; table-layout: fixed;font-size: 13px;">
                        <colgroup>
                            <col width="50%"/>
                            <col width="50%"/>
                        </colgroup>
                        <tbody>
                            <tr>
                                <td>Tổng tiền</td>
                                <td class="pos-right-align" style="text-align:right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(receipt_return.amount_before_discount - order.total_surcharge + discount_all)"/>
                                </td>
                            </tr>
                            <t t-set="discount_amount" t-value="order.discount_amount - widget.format_pr(discount_all,rounding)"/>
                            <tr t-if="discount_amount != 0">
                                <td>Giảm giá</td>
                                <td class="pos-right-align" style="text-align: right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(discount_amount)"/>
                                </td>
                            </tr>
                            <!-- <tr t-if="order.discount_amount != 0">
                                <td>Giảm giá</td>
                                <td class="pos-right-align" style="text-align:right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(order.discount_amount)"/>
                                </td>
                            </tr> -->
                            <tr t-if="order.total_surcharge &gt; 0">
                                <td>Phụ thu</td>
                                <td class="pos-right-align" style="text-align:right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(order.total_surcharge)"/>
                                </td>
                            </tr>
                            <tr class="emph" style="font-size: 16px;color:black;font-weight:bold;">
                                <td class="pos-left-align" style="width:200px;">Thành tiền</td>
                                <td class="pos-right-align" style="width:30%;text-align:right;">
                                    <t t-if="is_dollar_pos">$</t>
                                    <t t-esc="widget.format_currency_no_symbol(order.amount_total)"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="receipt-paymentlines" style="font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;font-size: 11px;">
                        <tbody>
                        	<t t-if="!paymentlines.length">
                        		<tr>
                                    <td style="width:60%;">
                                        CASH
                                    </td>
                                    <td class="pos-right-align" style="text-align:right;">
                                        0
                                    </td>
                                </tr>
                        	</t>
                            <t t-foreach="paymentlines" t-as="line">
                                <t t-set="exchange_rate" t-value="line.exchange_rate or 1"></t>
                                <tr>
                                    <td style="width:60%;">
                                        <t t-if="line.amount &lt; 0">
                                            Tiền trả lại (
                                                <t t-if="is_dollar_pos">USD</t>
                                                <t t-else="1">VND</t>
                                            )
                                        </t>
                                        <t t-else="1">
                                            <t t-if="line.voucher_code and line.voucher_code.length &gt; 0">
                                                <t t-if="widget.pos.payment_methods_by_id[line.payment_method_id].use_for != 'gift_code'">
		                                        	VC<t t-esc="line.voucher_max_value/1000"/> (<t t-esc="line.voucher_code"/>)
		                                        </t>
		                                        <t t-else="1">
		                                        	<t t-esc="widget.pos.payment_methods_by_id[line.payment_method_id].name"/> (<t t-esc="line.voucher_code"/>)
		                                        </t>
                                            </t>
                                            <t t-else="1">
                                                <t t-if="widget.pos.payment_methods_by_id[line.payment_method_id].use_for == 'cash' and line.currency_name">
                                                    <t t-esc="widget.pos.payment_methods_by_id[line.payment_method_id].name"/>(<t t-esc="line.currency_name"/>)
                                                </t>
                                                <t t-else="1">
                                                    <t t-esc="widget.pos.payment_methods_by_id[line.payment_method_id].name"/>
                                                </t>
                                            </t>
                                        </t>
                                    </td>
                                    <td class="pos-right-align" style="text-align:right;">
                                        <t t-if="widget.pos.payment_methods_by_id[line.payment_method_id].use_for == 'cash' and line.currency_name">
                                        	<t t-esc="widget.format_currency_no_symbol(line.amount+line.amount_change)"/>
                                        </t>
                                        <t t-else="1">
                                            <t t-if="is_dollar_pos">$</t>
                                            <t t-esc="widget.format_currency_no_symbol(Math.abs(line.amount))"/>
                                        </t>
                                    </td>
                                </tr>
                                <t t-if="line.amount_change">
                                    <tr>
                                        <td style="width:60%;">
                                            Tiền trả lại (
                                            <t t-if="is_dollar_pos">USD</t>
                                            <t t-else="1">VND</t>)
                                        </td>
                                        <td class="pos-right-align" style="text-align:right;">
                                            <t t-if="widget.pos.payment_methods_by_id[line.payment_method_id].use_for == 'cash' and line.currency_name">
                                                <!-- <t t-if="is_dollar_pos">$</t> -->
                                                <t t-esc="widget.format_currency_no_symbol(line.amount_change)"/>
                                            </t>
                                            <t t-else="1">
                                                <!-- <t t-if="is_dollar_pos">$</t> -->
                                                <t t-esc="widget.format_currency_no_symbol(Math.abs(line.amount_change))"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                                <t t-if="line.on_account_info">
                                    <t t-set="on_account_info_string" t-value="line.on_account_info"/>
                                </t>
                            </t>
                            <tr t-if="order.coupon_code">
                            	<!-- <t t-if="order.check_employee_coupon_using()">
                            		<td>Coupon NV</td>
                            		<td></td>
                            	</t>
                            	<t t-else="1"> -->
                                <td>Coupon:</td>
                                <td class="pos-right-align" style="text-align: right;">
                                    <t t-esc="order.coupon_code"/>
                                </td>
                            	<!-- </t> -->
                            </tr>
                        </tbody>
                    </table>
                    <table class="receipt-point" style="font-size: 11px;font-family:sans-serif;width: 100%; border: 0; table-layout: fixed;padding-top: 15px;border-collapse: separate;border-top: 2px dashed;" t-if="receipt_return.partner_name">
                        <colgroup>
                            <col width="40%"/>
                            <col width="60%"/>
                        </colgroup>
                        <tbody>
                            <t t-set="partner_return_id" t-value="widget.pos.get_order().order_to_return[0].order.partner_return_id"/>
                            <tr>
                                <td>Khách hàng:</td>
                                <td class="pos-right-align" style="text-transform: uppercase;text-align:right;">
                                    <t t-esc="receipt_return.partner_name"/>
                                </td>
                            </tr>
                            <t t-if="partner_return_id">
                            	<t t-if="!widget.pos.get_order().get_partner_cardcode_expired_date(partner_return_id)">
	                                <tr>
	                                    <td>Điểm:</td>
	                                    <td class="pos-right-align" style="text-align:right;">
	                                        <t t-esc="widget.format_pr(order.point_won,rounding)"/>/<t t-esc="widget.format_pr(order.partner_total_point,rounding)"/>
	                                    </td>
	                                </tr>
	                                <tr>
	                                    <td>Điểm tích lũy:</td>
	                                    <td class="pos-right-align" style="text-align:right;">
	                                        <t t-esc="widget.format_pr(order.partner_current_point,rounding)"/>
	                                    </td>
	                                </tr>
	                                <tr class="loyalty-level-name">
	                                    <td>Hạng thẻ:</td>
	                                    <td class="pos-right-align" style="text-align:right;">
	                                    	<t t-if="order.partner_loyalty_level_id">
	                                    		<t t-esc="current_order.get_loyalty_level_name_by_id(order.partner_loyalty_level_id)"/>
	                                    	</t>
	                                    </td>
	                                </tr>
	                                <tr class="loyalty-level-name">
	                                    <td>Ngày hết hạn:</td>
	                                    <td class="pos-right-align" style="text-align: right;">
	                                        <t t-esc="order.partner_expired_date"/>
	                                    </td>
	                                </tr>
	                             </t>
	                             <t t-else="1">
	                             	<tr class="loyalty-level-name">
	                                    <td>Ngày hết hạn:</td>
	                                    <td class="pos-right-align" style="text-align: right;">
	                                        <t t-esc="widget.pos.get_order().get_partner_cardcode_expired_date(partner_return_id)"/>
	                                    </td>
	                                </tr>
	                             </t>
                            </t>
                        </tbody>
                    </table>
                    <table t-if="on_account_info_string != 0" class="receipt-point" style="font-family: sans-serif; width: 100%; border: 0; table-layout: fixed; padding: 10px 0; border-collapse: separate; padding-right: 4%; border-top: 2px dashed; border-bottom: 2px dashed; margin-bottom: 10px;">
                        <colgroup>
                            <col width="100%"/>
                        </colgroup>
                        <tbody>
                            <tr>
                                <td style="font-size: 14px;">
                                    <t t-esc="on_account_info_string"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="line-height:17px;pos-center-align" style="font-family:sans-serif;text-align:center;font-weight:bold;font-size: 12px;margin-bottom: 5px;">
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 10px; border-bottom: 2px dashed; padding-bottom: 10px; white-space:pre-line" t-if="order.note">Ghi chú: <t t-esc="order.note"/>
                    </p>
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 10px; border-bottom: 2px dashed; padding-bottom: 10px; white-space:pre-line;font-weight:normal;"
                       t-if="order.delivery_address">Địa chỉ giao hàng: <t t-esc="order.delivery_address"/>
                    </p>
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 10px; border-bottom: 2px dashed; padding-bottom: 10px;font-weight:normal;" 
                       t-if="order.mobile_receiver_info">
                       <t t-esc="order.mobile_receiver_info"/>
                    </p>
                    <p style="margin-top:10px;text-align:left;font-size: 12px; margin-bottom: 10px; border-bottom: 2px dashed; padding-bottom: 10px;font-weight:normal;" 
                       t-if="order.invoice_request">
                       <t t-esc="order.invoice_name"/>-<t t-esc="order.invoice_vat"/>-<t t-esc="order.invoice_address || ''"/>-<t t-esc="order.invoice_email"/>-<t t-esc="order.invoice_contact"/>
                    </p>
                    <t t-raw='receipt.footer_xml' />
                    <p id="lasted-print" style="font-size: 12px; text-align: right; margin-top: 10px;"></p>
                </div>
            </div>
       </t>
    </t>
    <!-- Báo Cáo Bill kết ca -->
    <t t-name="PrintBillWidget">
		<div class="print-bill-session" style="font-family:Roboto;">
            <t t-set="sum_list_price" t-value="0"/>
            <t t-set="total_discount" t-value="0"/>
            <t t-set="total_gift" t-value="0"/>
			<div class="top-header">
                <p class="brand-name">PHÚC LONG</p>
                <h2 class="bill-title">BÁO CÁO DOANH THU CA</h2>
                <p class="session-date">Ngày: <t t-esc="date_start_string"/></p>
            </div>
            <div class="bill-general-info">
                <table>
                    <colgroup>
                        <col width="50%"/>
                        <col width="50%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>Người in:</td>
                            <td>
                                <t t-if="widget.state.data.cashier_id">
                                    <t t-esc="widget.state.data.cashier_id.data.display_name"/>
                                </t>
                                <t t-else="1">
                                    Thu ngân
                                </t>
                            </td>
                        </tr>
                        <tr>
                            <td>Thời gian in:</td>
                            <td>
                                <t t-esc="moment().format('L LT')"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Ca số:</td>
                            <td>
                                <t t-esc="session_name"/> 
                                <t t-if="widget.state.data.state == 'opened'">
                                    [MỞ]
                                </t>
                            </td>
                        </tr>
                        <tr>
                            <td>Chi nhánh:</td>
                            <td>
                                <t t-esc="warehouse_name"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-product-info">
                <p class="title">Sản phẩm</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-if="bill_products_by_cate">
                            <t t-foreach="bill_products_by_cate" t-as="line">
                                <tr>
                                    <td><t t-esc="line.name"/> [<t t-esc="line.qty"/>]</td>
                                    <td class="price-right">
                                        <t t-set="sum_list_price" t-value="sum_list_price + line.amount"/>
                                        <t t-esc="widget.format_value_with_precision(amount)"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        <tr>
                            <td>Tổng doanh thu nguyên giá</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(sum_list_price)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info"  t-if="total_surchase &gt; 0">
                <p class="title">Phụ thu</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>Tổng phụ thu</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(total_surchase)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info"  t-if="combo_list.length">
                <p class="title">Sản phẩm Combo</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-if="combo_list">
                            <t t-foreach="combo_list" t-as="combo">
                                <tr>
                                    <td><t t-esc="combo.combo_name"/></td>
                                    <td class="price-right">
                                        <t t-esc="combo.combo_qty"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                </table>
            </div>
            <div class="bill-discount-info" t-if="gift_info.length &gt; 0">
                <p class="title">Quà tặng</p>
                <table>
                    <colgroup>
                        <col width="80%"/>
                        <col width="20%"/>
                    </colgroup>
                    <tbody>
                        <t t-foreach="gift_info" t-as="dis">
                            <tr>
                                <td><t t-esc="dis.promo"/>[<t t-esc="num_bill"/>]</td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(0)"/>
                                    <!-- <t t-set="total_gift" t-value="total_gift + dis.amount"/> -->
                                </td>
                            </tr>
                        </t>
                        <!-- <tr>
                            <td>Tổng giảm giá</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(total_gift)"/>
                            </td>
                        </tr> -->
                    </tbody>
                </table>
            </div>
            <div class="bill-discount-info" t-if="discount_info.length &gt; 0">
                <p class="title">Giảm giá</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-foreach="discount_info" t-as="dis">
                            <tr>
                                <td><t t-esc="dis.promo"/>[<t t-esc="num_bill"/>]</td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(dis.amount)"/>
                                    <t t-set="total_discount" t-value="total_discount + dis.amount"/>
                                </td>
                            </tr>
                        </t>
                        <tr>
                            <td>Tổng giảm giá</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(total_discount)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info">
                <p class="title">Doanh thu sau giảm giá</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>
                                Tổng doanh thu
                            </td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(sum_list_price + total_surchase - total_discount)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-cancel-order-info">
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr t-if="num_of_partner">
                            <td>Số lượng KH thân thiết</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(num_of_partner)"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Số lượng bill</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(num_of_order)"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Trung bình bill</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(avg_total_order)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-payment-method-info" style="padding: 10px 0;border-bottom: 2px dashed black;">
                <p class="title" style="margin-bottom:5px;">Doanh thu theo thu ngân</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                    	<t t-if="order_by_cashier">
	                        <t t-foreach="order_by_cashier" t-as="cashier">
	                            <tr>
	                                <td>
	                                    <t t-esc="cashier.employee"/>
	                                    [<t t-esc="cashier.bills"/>]
	                                </td>
	                                <td class="price-right">
                                        <t t-esc="widget.format_value_with_precision(amount)"/>
	                                </td>
	                            </tr>
	                            <t t-foreach="cashier.payment_by_employee" t-as="payment">
		                            <tr>
		                                <td style="padding-left:15px">
		                                    <t t-esc="payment.method"/>
		                                    [<t t-esc="payment.count"/>]
		                                </td>
		                                <td class="price-right">
	                                        <t t-esc="widget.format_value_with_precision(payment.amount)"/>
		                                </td>
		                            </tr>
		                        </t>
	                        </t>
	                    </t>
                    </tbody>
                </table>
            </div>
            <div class="bill-payment-method-info">
                <p class="title">Phương thức thanh toán</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                    	<t t-if="order_by_journal">
	                        <t t-foreach="order_by_journal" t-as="journal">
	                            <tr>
	                                <td>
	                                    <t t-esc="journal.name"/>
	                                    [<t t-esc="journal.count"/>]
	                                </td>
	                                <td class="price-right">
                                        <t t-esc="widget.format_value_with_precision(amount)"/>
	                                </td>
	                            </tr>
	                        </t>
	                    </t>
                    </tbody>
                </table>
            </div>
		</div>
	</t>
    <!-- Báo Cáo Bill kết ngày -->
    <t t-name="PrintDateBillWidget">
        <t t-set="sum_list_price" t-value="0"/>
        <t t-set="total_discount" t-value="0"/>
        <t t-set="total_gift" t-value="0"/>
		<div class="print-bill-session" style="font-family:Roboto">
			<div class="top-header">
                <p class="brand-name">PHÚC LONG</p>
                <h2 class="bill-title">BÁO CÁO DOANH THU NGÀY</h2>
                <p class="session-date">Ngày: <t t-esc="date_start_string"/></p>
            </div>
            <div class="bill-general-info">
                <table>
                    <colgroup>
                        <col width="50%"/>
                        <col width="50%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>Người in:</td>
                            <td>
                                <t t-if="user_name">
                                    <t t-esc="user_name"/>
                                </t>
                                <t t-else="1">
                                    Thu ngân
                                </t>
                            </td>
                        </tr>
                        <tr>
                            <td>Thời gian in:</td>
                            <td>
                                <t t-esc="moment().format('L LT')"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Cửa hàng:</td>
                            <td>
                                <t t-esc="warehouse_name"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-product-info">
                <p class="title">Sản phẩm</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-if="bill_products_by_cate">
                            <t t-foreach="bill_products_by_cate" t-as="line">
                                <tr>
                                    <td><t t-esc="line.name"/> [<t t-esc="line.qty"/>]</td>
                                    <td class="price-right">
                                        <t t-set="sum_list_price" t-value="sum_list_price + line.amount"/>
                                        <t t-esc="widget.format_value_with_precision(amount)"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                        <tr>
                            <td>Tổng doanh thu nguyên giá</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(sum_list_price)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info"  t-if="combo_list.length">
                <p class="title">Sản phẩm Combo</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-if="combo_list">
                            <t t-foreach="combo_list" t-as="combo">
                                <tr>
                                    <td><t t-esc="combo.combo_name"/></td>
                                    <td class="price-right">
                                        <t t-esc="combo.combo_qty"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info"  t-if="total_surchase &gt; 0">
                <p class="title">Phụ thu</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>Tổng phụ thu</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(total_surchase)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-discount-info" t-if="gift_info.length &gt; 0">
                <p class="title">Quà tặng</p>
                <table>
                    <colgroup>
                        <col width="80%"/>
                        <col width="20%"/>
                    </colgroup>
                    <tbody>
                        <t t-foreach="gift_info" t-as="dis">
                            <tr>
                                <td><t t-esc="dis.promo"/>[<t t-esc="num_bill"/>]</td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(0)"/>
                                    <!-- <t t-set="total_gift" t-value="total_gift + dis.amount"/> -->
                                </td>
                            </tr>
                        </t>
                        <!-- <tr>
                            <td>Tổng giảm giá</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(total_gift)"/>
                            </td>
                        </tr> -->
                    </tbody>
                </table>
            </div>
            <div class="bill-discount-info" t-if="discount_info.length &gt; 0">
                <p class="title">Giảm giá</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-foreach="discount_info" t-as="dis">
                            <tr>
                                <td><t t-esc="dis.promo"/>[<t t-esc="num_bill"/>]</td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(dis.amount)"/>
                                    <t t-set="total_discount" t-value="total_discount + dis.amount"/>
                                </td>
                            </tr>
                        </t>
                        <tr>
                            <td>Tổng giảm giá</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(total_discount)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info">
                <p class="title">Doanh thu sau giảm giá</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>Tổng doanh thu</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(sum_list_price + total_surchase - total_discount)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="bill-income-info">
                <p class="title">Doanh thu ca</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <t t-foreach="session_amount" t-as="s">
                            <tr>
                                <t t-if="s.tag != 'morning' &amp; s.tag != 'after' &amp; s.tag != 'total'">
                                    <td>
                                        Ca <t t-esc="s.seq"/> 
                                        <t t-if="s.state == 'opened'">
                                            [Mở]
                                        </t>
                                    </td>
                                </t>
                                <t t-else="1">
                                    <t t-if="s.tag == 'total'">
                                        <td >
                                            Tổng doanh thu ca
                                        </td>
                                    </t>
                                    <t t-else="1">
                                        <td >
                                            Doanh thu ca <t t-esc="s.tag == 'morning' ? 'sáng':'tối'"/>
                                        </td>
                                    </t>
                                </t>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(s.amount)"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
            <!-- 
            <div class="bill-cancel-order-info" t-if="canceled_order_total">
                <p class="title">Đơn tạo sai/Đơn hủy</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>Đơn tạo sai/Đơn hủy [<t t-esc="canceled_order_len"/>]</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(canceled_order_total)"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
             -->
            <div class="bill-cancel-order-info">
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                        <tr t-if="num_of_partner">
                            <td>Số lượng KH thân thiết</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(num_of_partner)"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Số lượng bill</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(num_of_order)"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Trung bình bill</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(avg_total_order)"/>
                            </td>
                        </tr>
                        <t t-if="draft_bill and draft_bill.count">
                        	<tr>
	                            <td>Bill treo [<t t-esc="draft_bill.count"/>]</td>
	                            <td class="price-right">
	                                <t t-esc="widget.format_value_with_precision(draft_bill.amount)"/>
	                            </td>
	                        </tr>
                        </t>
                        <t t-if="auto_paid_bill and auto_paid_bill.count">
                        	<tr>
	                            <td>Bill xử lý tự động [<t t-esc="auto_paid_bill.count"/>]</td>
	                            <td class="price-right">
	                                <t t-esc="widget.format_value_with_precision(auto_paid_bill.amount)"/>
	                            </td>
	                        </tr>
                        </t>
                    </tbody>
                </table>
            </div>
            <div class="bill-cancel-order-info">
                <p class="title">Phương thức thanh toán</p>
                <table>
                    <colgroup>
                        <col width="65%"/>
                        <col width="35%"/>
                    </colgroup>
                    <tbody>
                    	<t t-if="order_by_journal">
	                        <t t-foreach="order_by_journal" t-as="journal">
	                            <tr>
	                                <td>
	                                    <t t-esc="journal.name"/>
	                                    [<t t-esc="journal.count"/>]
	                                </td>
	                                <td class="price-right">
                                        <t t-esc="widget.format_value_with_precision(amount)"/>
	                                </td>
	                            </tr>
	                        </t>
	                    </t>
                    </tbody>
                </table>
            </div>
            <div class="bill-payment-method-info">
                <p class="title">Ly sử dụng</p>
                <table>
                    <colgroup>
                        <col width="75%"/>
                        <col width="25%"/>
                    </colgroup>
                    <tbody>
                    	<!-- 
                        <tr>
                            <td>SL Ly nhựa</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(plastic_cup)"/>
                            </td>
                        </tr>
                        <tr>
                            <td>SL Ly giấy</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(paper_cup)"/>
                            </td>
                        </tr>
                         -->
                        <t t-foreach="cups" t-as="cup">
                            <tr>
                                <td><t t-esc="cup.name"/></td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(cup.sum)"/>
                                </td>
                            </tr>
                        </t>
                        <t t-foreach="lids" t-as="lid">
                            <tr>
                                <td><t t-esc="lid.name"/></td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(lid.sum)"/>
                                </td>
                            </tr>
                        </t>
                        <t t-foreach="list_no_cup" t-as="cup">
                            <tr>
                                <td>Không lấy <t t-esc="cup['name']"/></td>
                                <td class="price-right">
                                    <t t-esc="widget.format_value_with_precision(cup['num'])"/>
                                </td>
                            </tr>
                        </t>
                        <!-- 
                        <tr>
                            <td>SL Ly nhựa KH không lấy</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(cup_plastic)"/>
                            </td>
                        </tr>
                        <tr>
                            <td>SL Ly giấy KH không lấy</td>
                            <td class="price-right">
                                <t t-esc="widget.format_value_with_precision(cup_paper)"/>
                            </td>
                        </tr>
                         -->
                        <t t-if="change_cup_paper != 0" >
	                        <tr>
	                            <td>Ly giấy ⇒ Ly nhựa</td>
	                            <td class="price-right">
	                                <t t-esc="widget.format_value_with_precision(change_cup_paper)"/>
	                            </td>
	                        </tr>
	                    </t>
	                    <t t-if="change_cup_plastic != 0" >
	                        <tr>
	                            <td>Ly nhựa ⇒ Ly giấy</td>
	                            <td class="price-right">
	                                <t t-esc="widget.format_value_with_precision(change_cup_plastic)"/>
	                            </td>
	                        </tr>
	                    </t>
                    </tbody>
                </table>
            </div>
		</div>
	</t>
</templates>